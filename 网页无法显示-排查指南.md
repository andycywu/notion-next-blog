# 🔍 网页无法显示 - 排查指南

## ✅ 部署状态

从构建日志可以看到：
- ✅ 构建成功
- ✅ 清理脚本运行成功（目录大小 16.65 MB）
- ✅ 文件上传成功（736 个文件）
- ✅ 部署成功

但是网页无法显示，可能的原因如下：

---

## 🔍 排查步骤

### 步骤 1：确认访问的 URL

**Cloudflare Pages 的 URL 格式：**
- 生产环境：`https://blog-andycywu.pages.dev`
- 或自定义域名（如果已配置）

**确认方法：**
1. 在 Cloudflare Dashboard 中，进入 **Pages** > **blog-andycywu**
2. 查看 **Deployments** 页面
3. 找到最新的部署，点击查看
4. 应该会显示部署的 URL

**不要访问：**
- ❌ `*.workers.dev` - 这是 Workers 的 URL
- ❌ 旧的 URL（如果之前创建过 Workers 项目）

---

### 步骤 2：检查环境变量

**重要：** 确保 `NOTION_PAGE_ID` 已正确设置。

1. 在 Cloudflare Dashboard 中：
   - **Pages** > **notion-next-blog** > **Settings** > **Environment variables**

2. 确认以下变量已设置：
   - ✅ `NOTION_PAGE_ID` = `02ab3b8678004aa69e9e415905ef32a5`
   - ✅ `NEXT_PUBLIC_CONTACT_LINKEDIN` = `https://www.linkedin.com/in/andycywu/`

3. **如果变量未设置：**
   - 点击 **Add variable**
   - 添加 `NOTION_PAGE_ID`
   - 值：`02ab3b8678004aa69e9e415905ef32a5`
   - 环境：**Production**（或 Apply to all environments）
   - 保存后**重新部署**

---

### 步骤 3：检查浏览器控制台

1. 打开网站
2. 按 `F12` 打开开发者工具
3. 查看 **Console**（控制台）标签
4. 查看 **Network**（网络）标签

**常见错误：**
- `NOTION_PAGE_ID is not defined` - 环境变量未设置
- `Failed to fetch` - API 请求失败
- `404 Not Found` - 路由问题

---

### 步骤 4：检查 Next.js 配置

**问题：** Next.js 默认需要服务器端渲染，但 Cloudflare Pages 需要静态导出。

**检查：**
1. 查看 `next.config.js` 中的 `output` 配置
2. 当前配置：
   ```javascript
   output: process.env.EXPORT
     ? 'export'
     : process.env.NEXT_BUILD_STANDALONE === 'true'
       ? 'standalone'
       : undefined,
   ```

**如果使用静态导出：**
- 需要设置 `EXPORT=true` 环境变量
- 或者修改构建命令为：`EXPORT=true npm run build`

**但是：** 您的项目使用了 ISR（增量静态再生），这需要服务器端支持。

---

### 步骤 5：等待 CDN 生效

部署后，CDN 可能需要几分钟来更新：
1. 等待 2-5 分钟
2. 清除浏览器缓存（Ctrl+Shift+R 或 Cmd+Shift+R）
3. 尝试无痕模式访问

---

## 🎯 最可能的原因

根据您的项目配置，最可能的原因是：

### 原因 1：环境变量未设置（最可能）

**症状：**
- 页面显示空白或错误信息
- 控制台显示 `NOTION_PAGE_ID is not defined`

**解决：**
1. 在 Cloudflare Dashboard 中设置 `NOTION_PAGE_ID`
2. 重新部署

### 原因 2：Next.js SSR 与 Pages 不兼容

**症状：**
- 页面显示 404 或错误
- 某些路由无法访问

**解决：**
- Cloudflare Pages 支持 Next.js，但可能需要特殊配置
- 检查是否需要使用 `@cloudflare/next-on-pages` 适配器

### 原因 3：访问了错误的 URL

**症状：**
- 显示 "Hello World" 或 Workers 页面

**解决：**
- 确认访问的是 `*.pages.dev` URL，不是 `*.workers.dev`

---

## 🔧 快速修复方案

### 方案 1：检查并设置环境变量（推荐先试这个）

1. **访问 Cloudflare Dashboard**
   - https://dash.cloudflare.com/
   - **Pages** > **blog-andycywu** > **Settings** > **Environment variables**

2. **添加必需变量：**
   - 变量名：`NOTION_PAGE_ID`
   - 值：`02ab3b8678004aa69e9e415905ef32a5`
   - 环境：**Production**
   - 类型：**Plain text**

3. **重新部署：**
   - 进入 **Deployments** 页面
   - 点击最新部署的 **...** 菜单
   - 选择 **Retry deployment**

### 方案 2：检查网站 URL

1. 在 Cloudflare Dashboard 中查看部署 URL
2. 确认是 `*.pages.dev` 格式
3. 访问该 URL

### 方案 3：查看浏览器控制台

1. 打开网站
2. 按 `F12` 打开开发者工具
3. 查看错误信息
4. 根据错误信息调整

---

## 📋 检查清单

请确认：

- [ ] 访问的是正确的 URL（`*.pages.dev`，不是 `*.workers.dev`）
- [ ] `NOTION_PAGE_ID` 环境变量已设置
- [ ] 环境变量值正确：`02ab3b8678004aa69e9e415905ef32a5`
- [ ] 已重新部署（设置环境变量后）
- [ ] 等待了 2-5 分钟让 CDN 生效
- [ ] 清除了浏览器缓存
- [ ] 检查了浏览器控制台的错误信息

---

## 🆘 如果仍然无法显示

请提供以下信息：

1. **访问的 URL**：您访问的具体网址
2. **浏览器控制台错误**：F12 打开控制台，截图或复制错误信息
3. **网络请求**：F12 > Network 标签，查看失败的请求
4. **环境变量状态**：在 Cloudflare Dashboard 中确认环境变量是否已设置

---

## 📞 需要帮助？

如果按照以上步骤操作后仍然无法显示，请告诉我：

1. 您访问的具体 URL
2. 浏览器控制台显示的错误信息
3. 环境变量是否已设置

我会根据具体情况提供更详细的解决方案。

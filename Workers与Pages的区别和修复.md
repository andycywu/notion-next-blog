# ğŸ” Workers ä¸ Pages çš„åŒºåˆ«å’Œä¿®å¤æŒ‡å—

## âŒ å½“å‰é—®é¢˜

ä»æ‚¨çš„æˆªå›¾å¯ä»¥çœ‹åˆ°ï¼Œæ‚¨å½“å‰åˆ›å»ºçš„æ˜¯ **Cloudflare Workers** é¡¹ç›®ï¼Œè€Œä¸æ˜¯ **Cloudflare Pages** é¡¹ç›®ã€‚

**å…³é”®è¯æ®ï¼š**
1. URL æ˜¾ç¤ºï¼š`workers/services/view/notion-next-blog` - è¿™æ˜¯ Workers
2. è®¾ç½®é¡µé¢æè¿°ï¼š"å°†æ‚¨çš„ Worker è¿æ¥åˆ° Git å­˜æ”¾åº“" - æ˜ç¡®æ˜¯ Worker
3. æœ‰ "ç‰ˆæœ¬å‘½ä»¤" (Version command): `npx wrangler versions upload` - è¿™æ˜¯ Workers ç‰¹æœ‰çš„åŠŸèƒ½

---

## ğŸ“Š Workers vs Pages çš„å…³é”®åŒºåˆ«

### Cloudflare Workers âŒï¼ˆå½“å‰é”™è¯¯ï¼‰

**ç‰¹ç‚¹ï¼š**
- âŒ è¿è¡Œ JavaScript ä»£ç ç‰‡æ®µ
- âŒ å¤„ç†å•ä¸ªè¯·æ±‚/å“åº”
- âŒ ä¸é€‚åˆå®Œæ•´çš„ Next.js åº”ç”¨
- âŒ éœ€è¦ `wrangler deploy` å‘½ä»¤
- âŒ æœ‰ "ç‰ˆæœ¬å‘½ä»¤" (Version command)
- âŒ URL: `*.workers.dev`

**é€‚åˆï¼š**
- API ç«¯ç‚¹
- è¯·æ±‚æ‹¦æˆªå’Œä¿®æ”¹
- è¾¹ç¼˜è®¡ç®—é€»è¾‘

### Cloudflare Pages âœ…ï¼ˆæ­£ç¡®é€‰æ‹©ï¼‰

**ç‰¹ç‚¹ï¼š**
- âœ… ä¸“é—¨ä¸ºé™æ€ç½‘ç«™å’Œæ¡†æ¶è®¾è®¡
- âœ… æ”¯æŒ Next.jsã€Reactã€Vue ç­‰
- âœ… è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²
- âœ… ä¸éœ€è¦éƒ¨ç½²å‘½ä»¤ï¼ˆè‡ªåŠ¨å¤„ç†ï¼‰
- âœ… æ²¡æœ‰ "ç‰ˆæœ¬å‘½ä»¤"
- âœ… URL: `*.pages.dev`

**é€‚åˆï¼š**
- Next.js åº”ç”¨ï¼ˆæ‚¨çš„é¡¹ç›®ï¼‰
- é™æ€ç½‘ç«™
- åšå®¢
- éœ€è¦è‡ªåŠ¨éƒ¨ç½²çš„é¡¹ç›®

---

## ğŸ¯ æœ¬åœ° NPM vs Cloudflare Pages çš„å·®å¼‚

### æœ¬åœ°å¼€å‘ï¼ˆNPMï¼‰

```bash
npm run dev    # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run build  # æ„å»ºåº”ç”¨
npm start      # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
```

**ç‰¹ç‚¹ï¼š**
- éœ€è¦ Node.js è¿è¡Œæ—¶
- éœ€è¦è¿è¡ŒæœåŠ¡å™¨è¿›ç¨‹
- é€‚åˆå¼€å‘å’Œæµ‹è¯•

### Cloudflare Pagesï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

**ç‰¹ç‚¹ï¼š**
- âœ… **ä¸éœ€è¦è¿è¡ŒæœåŠ¡å™¨** - Pages è‡ªåŠ¨å¤„ç†
- âœ… **è‡ªåŠ¨æ„å»º** - ä» Git ä»“åº“è‡ªåŠ¨æ„å»º
- âœ… **é™æ€ç”Ÿæˆ** - Next.js ä¼šç”Ÿæˆé™æ€ HTML
- âœ… **CDN åˆ†å‘** - å…¨çƒ CDN åŠ é€Ÿ
- âœ… **é›¶é…ç½®** - å¯¹äº Next.jsï¼Œå‡ ä¹ä¸éœ€è¦é…ç½®

**å…³é”®å·®å¼‚ï¼š**
1. **ä¸éœ€è¦ `npm start`** - Pages ä¼šè‡ªåŠ¨æœåŠ¡æ„å»ºåçš„æ–‡ä»¶
2. **æ„å»ºè¾“å‡º** - Next.js æ„å»ºåˆ° `.next` ç›®å½•ï¼ŒPages è‡ªåŠ¨éƒ¨ç½²
3. **ç¯å¢ƒå˜é‡** - åœ¨ Cloudflare Dashboard ä¸­è®¾ç½®ï¼Œä¸æ˜¯ `.env` æ–‡ä»¶

---

## âœ… æ­£ç¡®çš„è§£å†³æ–¹æ¡ˆ

### æ­¥éª¤ 1ï¼šåˆ›å»ºæ–°çš„ Cloudflare Pages é¡¹ç›®

1. **è®¿é—® Cloudflare Dashboard**
   - https://dash.cloudflare.com/
   - ç™»å½•æ‚¨çš„è´¦å·

2. **è¿›å…¥ Pages**
   - åœ¨å·¦ä¾§èœå•ï¼Œæ‰¾åˆ° **"Workers å’Œ Pages"**
   - ç‚¹å‡»å±•å¼€
   - **ç‚¹å‡» "Pages"**ï¼ˆä¸æ˜¯ Workersï¼ï¼‰

3. **åˆ›å»ºæ–°é¡¹ç›®**
   - ç‚¹å‡» **"Create a project"**ï¼ˆåˆ›å»ºé¡¹ç›®ï¼‰
   - é€‰æ‹© **"Connect to Git"**ï¼ˆè¿æ¥åˆ° Gitï¼‰

4. **è¿æ¥ Git ä»“åº“**
   - æˆæƒ Cloudflare è®¿é—® GitHub
   - é€‰æ‹©ä»“åº“ï¼š`andycywu/notion-next-blog`
   - ç‚¹å‡» **"Begin setup"**ï¼ˆå¼€å§‹è®¾ç½®ï¼‰

### æ­¥éª¤ 2ï¼šé…ç½®æ„å»ºè®¾ç½®

åœ¨é¡¹ç›®è®¾ç½®é¡µé¢ï¼Œé…ç½®ä»¥ä¸‹ä¿¡æ¯ï¼š

| è®¾ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| **Project name** | `notion-next-blog` | é¡¹ç›®åç§° |
| **Production branch** | `main` | ç”Ÿäº§åˆ†æ”¯ |
| **Framework preset** | `Next.js` | **é‡è¦ï¼šé€‰æ‹© Next.js** |
| **Build command** | `npm install && npm run build` | æ„å»ºå‘½ä»¤ |
| **Build output directory** | `.next` | æ„å»ºè¾“å‡ºç›®å½• |
| **Root directory** | `/` | æ ¹ç›®å½• |
| **Deploy command** | ï¼ˆ**ç•™ç©º**ï¼‰| **ä¸è¦å¡«å†™ä»»ä½•å†…å®¹** |

**é‡è¦ï¼š**
- âœ… é€‰æ‹© **Framework preset: Next.js**
- âœ… **ä¸è¦**å¡«å†™ Deploy command
- âœ… **ä¸è¦**å¡«å†™ Version commandï¼ˆPages æ²¡æœ‰è¿™ä¸ªï¼‰

### æ­¥éª¤ 3ï¼šè®¾ç½®ç¯å¢ƒå˜é‡

1. åœ¨é¡¹ç›®è®¾ç½®ä¸­ï¼Œè¿›å…¥ **"Environment variables"**ï¼ˆç¯å¢ƒå˜é‡ï¼‰

2. æ·»åŠ ä»¥ä¸‹å˜é‡ï¼š

**å¿…éœ€å˜é‡ï¼š**
- **å˜é‡å**: `NOTION_PAGE_ID`
- **å€¼**: `02ab3b8678004aa69e9e415905ef32a5`
- **ç¯å¢ƒ**: Productionï¼ˆæˆ– Apply to all environmentsï¼‰
- **ç±»å‹**: Plain text

**æ¨èå˜é‡ï¼š**
- **å˜é‡å**: `NEXT_PUBLIC_CONTACT_LINKEDIN`
- **å€¼**: `https://www.linkedin.com/in/andycywu/`
- **ç¯å¢ƒ**: Production
- **ç±»å‹**: Plain text

### æ­¥éª¤ 4ï¼šéƒ¨ç½²

1. ç‚¹å‡» **"Save and Deploy"**ï¼ˆä¿å­˜å¹¶éƒ¨ç½²ï¼‰
2. ç­‰å¾…æ„å»ºå®Œæˆï¼ˆçº¦ 3-5 åˆ†é’Ÿï¼‰
3. éƒ¨ç½²å®Œæˆåï¼Œæ‚¨ä¼šè·å¾—ä¸€ä¸ª `*.pages.dev` çš„åŸŸå

---

## ğŸ”„ å¦‚ä½•å¤„ç†ç°æœ‰çš„ Workers é¡¹ç›®

### é€‰é¡¹ 1ï¼šåˆ é™¤ Workers é¡¹ç›®ï¼ˆæ¨èï¼‰

å¦‚æœæ‚¨ä¸éœ€è¦ Workers é¡¹ç›®ï¼š

1. è¿›å…¥ Workers é¡¹ç›®è®¾ç½®
2. åˆ é™¤é¡¹ç›®ï¼ˆå¦‚æœä¸å†éœ€è¦ï¼‰

### é€‰é¡¹ 2ï¼šä¿ç•™ Workers é¡¹ç›®

å¦‚æœæ‚¨æƒ³ä¿ç•™ Workers é¡¹ç›®ç”¨äºå…¶ä»–ç”¨é€”ï¼š

1. é‡å‘½å Workers é¡¹ç›®ï¼ˆä¾‹å¦‚ï¼š`notion-next-blog-worker`ï¼‰
2. åˆ›å»ºæ–°çš„ Pages é¡¹ç›®ï¼ˆä½¿ç”¨ä¸åŒçš„åç§°æˆ–ç›¸åŒçš„åç§°ï¼‰

---

## ğŸ“‹ æ­£ç¡®çš„ Pages é¡¹ç›®è®¾ç½®æ£€æŸ¥æ¸…å•

åˆ›å»º Pages é¡¹ç›®åï¼Œç¡®è®¤ä»¥ä¸‹è®¾ç½®ï¼š

- [ ] é¡¹ç›®ç±»å‹æ˜¯ **Pages**ï¼ˆä¸æ˜¯ Workersï¼‰
- [ ] URL æ˜¯ `*.pages.dev`ï¼ˆä¸æ˜¯ `*.workers.dev`ï¼‰
- [ ] Framework preset è®¾ç½®ä¸º **Next.js**
- [ ] Build command: `npm install && npm run build`
- [ ] Build output directory: `.next`
- [ ] **Deploy command ç•™ç©º**ï¼ˆé‡è¦ï¼ï¼‰
- [ ] **æ²¡æœ‰ Version command**ï¼ˆPages æ²¡æœ‰è¿™ä¸ªï¼‰
- [ ] ç¯å¢ƒå˜é‡å·²è®¾ç½®ï¼ˆ`NOTION_PAGE_ID` ç­‰ï¼‰

---

## ğŸ¯ å…³é”®å·®å¼‚æ€»ç»“

| ç‰¹æ€§ | Workersï¼ˆé”™è¯¯ï¼‰ | Pagesï¼ˆæ­£ç¡®ï¼‰ |
|------|----------------|--------------|
| **é¡¹ç›®ç±»å‹** | Workers | Pages |
| **URL** | `*.workers.dev` | `*.pages.dev` |
| **é€‚åˆ** | APIã€è¾¹ç¼˜é€»è¾‘ | Next.jsã€é™æ€ç½‘ç«™ |
| **éƒ¨ç½²å‘½ä»¤** | `wrangler deploy` | è‡ªåŠ¨ï¼ˆä¸éœ€è¦ï¼‰ |
| **ç‰ˆæœ¬å‘½ä»¤** | `wrangler versions upload` | ä¸å­˜åœ¨ |
| **æ„å»ºæ–¹å¼** | æ‰‹åŠ¨æˆ– Git | è‡ªåŠ¨ï¼ˆGit é›†æˆï¼‰ |
| **Next.js æ”¯æŒ** | âŒ ä¸æ”¯æŒ | âœ… å®Œå…¨æ”¯æŒ |

---

## âœ… ä¿®å¤åçš„é¢„æœŸç»“æœ

ä¿®å¤åï¼ˆä½¿ç”¨ Pagesï¼‰ï¼š

1. âœ… é¡¹ç›®ç±»å‹ï¼š**Pages**
2. âœ… URLï¼š`https://notion-next-blog.pages.dev`ï¼ˆæˆ–è‡ªå®šä¹‰åŸŸåï¼‰
3. âœ… æ„å»ºæˆåŠŸï¼šè‡ªåŠ¨ä» Git æ„å»º
4. âœ… éƒ¨ç½²æˆåŠŸï¼šè‡ªåŠ¨éƒ¨ç½²åˆ° CDN
5. âœ… ç½‘ç«™æ­£å¸¸ï¼šNext.js åº”ç”¨æ­£å¸¸è¿è¡Œ

---

## ğŸš€ ç«‹å³è¡ŒåŠ¨

**ç°åœ¨è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š**

1. âœ… è®¿é—® Cloudflare Dashboard
2. âœ… è¿›å…¥ **Pages**ï¼ˆä¸æ˜¯ Workersï¼‰
3. âœ… åˆ›å»ºæ–°é¡¹ç›®å¹¶è¿æ¥åˆ° Git
4. âœ… é…ç½®æ„å»ºè®¾ç½®ï¼ˆé€‰æ‹© Next.jsï¼‰
5. âœ… è®¾ç½®ç¯å¢ƒå˜é‡
6. âœ… éƒ¨ç½²

**å®Œæˆåï¼Œæ‚¨çš„ Next.js åšå®¢åº”è¯¥å¯ä»¥æ­£å¸¸è¿è¡Œäº†ï¼** ğŸ‰

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. ç¡®è®¤æ‚¨åˆ›å»ºçš„æ˜¯ **Pages** é¡¹ç›®ï¼Œä¸æ˜¯ Workers
2. æ£€æŸ¥ Framework preset æ˜¯å¦é€‰æ‹©äº† **Next.js**
3. ç¡®è®¤ Deploy command å·²ç•™ç©º
4. æŸ¥çœ‹æ„å»ºæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
